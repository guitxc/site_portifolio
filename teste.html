<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrossel Infinito</title>
    <style>
        /* Estilização Visual */
        body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background: #f0f0f0; font-family: sans-serif; }

        .carousel-container {
            width: 80%;
            max-width: 600px;
            overflow: hidden; /* Esconde os slides fora da caixa */
            position: relative;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .slide {
            min-width: 100%;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            font-weight: bold;
        }

        /* Cores dos Slides */
        .s1 { background-color: #3498db; }
        .s2 { background-color: #e74c3c; }
        .s3 { background-color: #2ecc71; }
        .s4 { background-color: #f1c40f; }

        /* Botões */
        button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.3);
            color: white;
            border: none;
            padding: 15px;
            cursor: pointer;
            font-size: 1.5rem;
            z-index: 10;
        }
        button:hover { background: rgba(0,0,0,0.6); }
        .prev { left: 0; }
        .next { right: 0; }
    </style>
</head>
<body>

<div class="carousel-container">
    <div class="carousel-track" id="track">
        <div class="slide s1">1</div>
        <div class="slide s2">2</div>
        <div class="slide s3">3</div>
        <div class="slide s4">4</div>
    </div>
    <button class="prev" onclick="movePrev()">❮</button>
    <button class="next" onclick="moveNext()">❯</button>
</div>

<script>
    const track = document.getElementById('track');
    let slides = document.querySelectorAll('.slide');
    
    // 1. Clonar primeiro e último slide para o loop infinito
    const firstClone = slides[0].cloneNode(true);
    const lastClone = slides[slides.length - 1].cloneNode(true);

    track.appendChild(firstClone);
    track.prepend(lastClone);

    // 2. Ajuste inicial de posição (pular o clone do último para o slide 1 real)
    let index = 1;
    track.style.transform = `translateX(${-index * 100}%)`;

    function moveNext() {
        if (index >= slides.length + 1) return;
        index++;
        track.style.transition = "transform 0.5s ease-in-out";
        track.style.transform = `translateX(${-index * 100}%)`;
    }

    function movePrev() {
        if (index <= 0) return;
        index--;
        track.style.transition = "transform 0.5s ease-in-out";
        track.style.transform = `translateX(${-index * 100}%)`;
    }

    // 3. O "Pulo do Gato": Resetar a posição sem transição no final dos clones
    track.addEventListener('transitionend', () => {
        if (index === slides.length + 1) { // Chegou no clone do primeiro
            track.style.transition = "none";
            index = 1;
            track.style.transform = `translateX(${-index * 100}%)`;
        }
        if (index === 0) { // Chegou no clone do último
            track.style.transition = "none";
            index = slides.length;
            track.style.transform = `translateX(${-index * 100}%)`;
        }
    });
</script>

</body>
</html>
